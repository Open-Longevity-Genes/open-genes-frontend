<div class="item card__content">
  <div class="card__section card__title">
    <div class="title">
      <a [routerLink]="['/gene', item.symbol]" class="link link--gray">
        <b>{{ item.symbol }}</b> {{ item.name }}
      </a>
    </div>

    <div class="card__actions">
      <app-gene-menu
        [gene]="item"
        [isAdded]="isFaved(item.id)"
        (unFav)="unFavItem($event)"
        (fav)="favItem($event)"
      ></app-gene-menu>
    </div>
  </div>

  <ng-container *ngIf="listSettings.ifShowAge">
    <div class="card__section card__age-mya">
        <span class="label">
          {{ "phylogeny" | translate }}
        </span>
      <app-gene-age [gene]="item" show="origin"></app-gene-age>
    </div>

    <div *ngIf="item.homologueTaxon" class="card__section card__age-homologs">
        <span class="label">
          {{ "ncbi_homologs" | translate }}
        </span>
      <app-gene-age [gene]="item" show="homologs"></app-gene-age>
    </div>
  </ng-container>

  <div *ngIf="listSettings.ifShowDiseases"
       class="card__section">
    <app-associated-diseases
      [geneDiseases]="item.diseases"
    ></app-associated-diseases>
  </div>

  <div *ngIf="listSettings.ifShowDiseaseCategories"
       class="card__section">
    <app-associated-diseases
      [geneDiseases]="item.diseaseCategories"
    ></app-associated-diseases>
  </div>

  <div *ngIf="listSettings.ifShowCriteria"
       class="card__section">
    <app-selection-criteria
      [geneCriteria]="item.commentCause"
    ></app-selection-criteria>
  </div>
</div>

<div *ngIf="isGoTermsMode ||
    listSettings.ifShowClasses ||
    listSettings.ifShowExpression ||
    listSettings.ifShowMethylation"
     class="card__controls">
  <ng-container *ngIf="!isGoTermsMode; else GoModeCardActions">
    <div *ngIf="item.functionalClusters && listSettings.ifShowClasses" class="card__section">
          <span class="label">
            {{ "functional_classes" | translate }}
          </span>
      <app-tag
        *ngFor="let cluster of item.functionalClusters"
        (click)="onFuncCluster(cluster['id'])"
        [isActive]="filters.byClasses.includes(cluster['id'])"
      >{{ cluster["name"] }}
      </app-tag>
    </div>

    <div *ngIf="listSettings.ifShowExpression"
         class="card__section">
          <span class="label">
            {{ "main_page_table_expression" | translate }}
          </span>
      <app-tag
        (click)="onExpressionChange(item.expressionChange)"
        [isDisabled]="item.expressionChange !== 0"
        [isActive]="
              filters.byExpressionChange === item.expressionChange &&
              item.expressionChange !== 0"
      >{{ getExpressionLocaleKey(item.expressionChange) | translate }}
      </app-tag>
    </div>
  </ng-container>

  <div *ngIf="listSettings.ifShowMethylation"
       class="card__section">
                  <span class="label">
            {{ "main_page_table_methylation" | translate }}
          </span>
    <app-tag
      *ngIf="item.methylationCorrelation !== ''"
      (click)="onMethylationChange(item.methylationCorrelation)"
      [isActive]="
              filters.byMethylationChange === item.methylationCorrelation"
    >{{ item.methylationCorrelation }}
    </app-tag>
  </div>

  <ng-template #GoModeCardActions>
    <div class="card__section" *ngIf="item.terms">
      <a
        *ngFor="let term of goModeCellData.biologicalProcess | keyvalue"
        href="https://www.ebi.ac.uk/QuickGO/term/GO:{{ term.key | zero }}"
        class="tag"
        matTooltip="{{ term.value }}"
      >
        {{ term.key | zero }}
      </a>
      <a
        *ngFor="let term of goModeCellData.cellularComponent | keyvalue"
        href="https://www.ebi.ac.uk/QuickGO/term/GO:{{ term.key | zero }}"
        class="tag"
        matTooltip="{{ term.value }}"
      >
        {{ term.key | zero }}
      </a>
      <a
        *ngFor="let term of goModeCellData.molecularActivity | keyvalue"
        href="https://www.ebi.ac.uk/QuickGO/term/GO:{{ term.key | zero }}"
        class="tag"
        matTooltip="{{ term.value }}"
      >
        {{ term.key | zero }}
      </a>
    </div>
  </ng-template>
</div>

