<section *ngIf="isIncreaseLifespan">
  <h4>{{ "gene_page_researches_lifespan" | translate }}</h4>
  <div class="table-section __mt-20 __w-content">
    <table class="table">
      <thead>
        <th class="__cell-width-medium">
          {{ "researches_method" | translate }}
        </th>
        <th class="__cell-width-medium">
          {{ "researches_result" | translate }}
        </th>
        <th>{{ "researches_object" | translate }}</th>
        <th>{{ "researches_line" | translate }}</th>
        <th>{{ "researches_age" | translate }}<sup>*</sup></th>
        <th>{{ "researches_genotype" | translate }}</th>
        <th>
          {{ "researches_change" | translate }}&nbsp;<span
            class="fa fal fa-mars"
          ></span
          ><sup>**</sup>
        </th>
        <th>
          {{ "researches_change" | translate }}&nbsp;<span
            class="fa fal fa-venus"
          ></span
          ><sup>**</sup>
        </th>
        <th>
          {{ "researches_change" | translate }}&nbsp;<span
            class="fa fal fa-venus"
          ></span
          >&nbsp;<span class="fa fal fa-mars"></span><sup>**</sup>
        </th>
        <th>
          {{ "researches_comment" | translate }}
        </th>
        <th>{{ "researches_reference" | translate }}</th>
      </thead>

      <tr *ngFor="let item of researches.increaseLifespan">
        <td>
          {{ item.interventionType || "–" }}
        </td>
        <td>
          {{ item.longevityEffect || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.modelOrganism || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.organismLine || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.age || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.genotype || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.valueForMale || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.valueForFemale || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.valueForAll || "–" }}
        </td>
        <td>
          <button
            class="btn btn--small btn-purple btn-flat"
            (click)="openCommentModal(item.comment)"
          >
            {{ "researches_comment_button" | translate }}
          </button>
        </td>
        <td class="__cell-width-medium">
          <ng-container
            [ngTemplateOutlet]="links"
            [ngTemplateOutletContext]="{ item: item }"
          ></ng-container>
        </td>
      </tr>
    </table>
    <legend class="reference">
      <p><sup>*</sup>{{ "gene_page_researches_lifespan_hint1" | translate }}</p>
      <p>
        <sup>**</sup>{{ "gene_page_researches_lifespan_hint2" | translate }}
      </p>
    </legend>
  </div>
</section>

<section *ngIf="isAgeRelatedChanges">
  <h4>{{ "gene_page_researches_age_related_changes" | translate }}</h4>
  <div class="table-section __mt-20 __w-content">
    <table class="table table--age-related-change">
      <thead>
        <th class="__cell-width-small">
          {{ "age_related_changes_type" | translate }}
        </th>
        <th>{{ "researches_object" | translate }}</th>
        <th>{{ "researches_line" | translate }}</th>
        <th>{{ "age_related_changes_sample" | translate }}</th>
        <th>{{ "researches_age_from" | translate }}</th>
        <th>{{ "researches_age_to" | translate }}</th>
        <th>{{ "age_related_changes_measurement_method" | translate }}</th>
        <th>
          {{ "researches_change" | translate }}&nbsp;<span
            class="fa fal fa-mars"
          ></span>
        </th>
        <th>
          {{ "researches_change" | translate }}&nbsp;<span
            class="fa fal fa-venus"
          ></span>
        </th>
        <th>
          {{ "researches_change" | translate }}&nbsp;<span
            class="fa fal fa-venus"
          ></span
          >&nbsp;<span class="fa fal fa-mars"></span>
        </th>
        <th>
          {{ "researches_comment" | translate }}
        </th>
        <th>{{ "researches_reference" | translate }}</th>
      </thead>

      <tr *ngFor="let item of researches.ageRelatedChangesOfGene">
        <td>
          {{ item.changeType || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.modelOrganism || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.organismLine || "–" }}
        </td>
        <td>
          {{ item.sample || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.ageFrom || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.ageTo || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.measurementType || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.valueForMale || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.valueForFemale || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.valueForAll || "–" }}
        </td>
        <td>
          <button
            class="btn btn--small btn-purple btn-flat"
            (click)="openCommentModal(item.comment)"
          >
            {{ "researches_comment_button" | translate }}
          </button>
        </td>
        <td class="__cell-width-medium">
          <ng-container
            [ngTemplateOutlet]="links"
            [ngTemplateOutletContext]="{ item: item }"
          ></ng-container>
        </td>
      </tr>
    </table>
  </div>
</section>

<section *ngIf="isInterventionAffectsAgingProcess">
  <h4>{{ "gene_page_intervention_moderates_aging" | translate }}</h4>
  <div class="table-section __mt-20 __w-content">
    <table class="table table--gene-intervention-to-vital-processes">
      <thead>
        <th class="__cell-width-small">
          {{ "gene_intervention_type" | translate }}
        </th>
        <th class="__cell-width-small">
          {{ "gene_intervention_result" | translate }}
        </th>
        <th>{{ "intervention_aging_process" | translate }}</th>
        <th>{{ "researches_object" | translate }}</th>
        <th>{{ "researches_age" | translate }}<sup>*</sup></th>
        <th>{{ "researches_sex" | translate }}</th>
        <th>{{ "researches_line" | translate }}</th>
        <th>{{ "researches_genotype" | translate }}</th>
        <th>
          {{ "researches_comment" | translate }}
        </th>
        <th>{{ "researches_reference" | translate }}</th>
      </thead>

      <tr
        *ngFor="let item of researches.interventionToGeneImprovesVitalProcesses"
      >
        <td>
          {{ item.geneIntervention || "–" }}
        </td>
        <td>
          {{ item.interventionResultForVitalProcess || "–" }}
        </td>
        <td>
          {{ item.vitalProcess || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.modelOrganism || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.age || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.sex || "–" }}
        </td>
        <td>
          {{ item.organismLine || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.genotype || "–" }}
        </td>
        <td>
          <button
            class="btn btn--small btn-purple btn-flat"
            (click)="openCommentModal(item.comment)"
          >
            {{ "researches_comment_button" | translate }}
          </button>
        </td>
        <td class="__cell-width-medium">
          <ng-container
            [ngTemplateOutlet]="links"
            [ngTemplateOutletContext]="{ item: item }"
          ></ng-container>
        </td>
      </tr>
    </table>
  </div>
  <legend class="reference">
    <sup>*</sup>{{ "gene_page_researches_lifespan_hint1" | translate }}
  </legend>
</section>

<section *ngIf="isProteinRegulatesOtherGenes">
  <h4>{{ "gene_page_researches_protein_regulates_genes" | translate }}</h4>
  <div class="table-section __mt-20 __w-content">
    <table class="table table--protein-to-gene">
      <thead>
        <th class="__cell-width-small">
          {{ "protein_regulates_genes_activity" | translate }}
        </th>
        <th>{{ "gene" | translate }}</th>
        <th>{{ "researches_regulation_type" | translate }}</th>
        <th>
          {{ "researches_comment" | translate }}
        </th>
        <th>{{ "researches_reference" | translate }}</th>
      </thead>

      <tr *ngFor="let item of researches.proteinRegulatesOtherGenes">
        <td>
          {{ item.proteinActivity || "–" }}
        </td>
        <td>
          <a href="gene/{{ item.regulatedGene.symbol }}" class="link">{{
            item.regulatedGene.symbol
          }}</a>
        </td>
        <td>
          {{ item.regulationType || "–" }}
        </td>
        <td>
          <button
            class="btn btn--small btn-purple btn-flat"
            (click)="openCommentModal(item.comment)"
          >
            {{ "researches_comment_button" | translate }}
          </button>
        </td>
        <td class="__cell-width-medium">
          <ng-container
            [ngTemplateOutlet]="links"
            [ngTemplateOutletContext]="{ item: item }"
          ></ng-container>
        </td>
      </tr>
    </table>
  </div>
</section>

<section *ngIf="isGeneAssociatedWithProgeriaSyndromes">
  <h4>{{ "gene_page_researches_progeria" | translate }}</h4>
  <div class="table-section __mt-20 __w-content">
    <table class="table table--gene-to-progeria">
      <thead>
        <th>{{ "progeria_syndrome" | translate }}</th>
        <th>
          {{ "researches_comment" | translate }}
        </th>
        <th>{{ "researches_reference" | translate }}</th>
      </thead>

      <tr *ngFor="let item of researches.geneAssociatedWithProgeriaSyndromes">
        <td>
          {{ item.progeriaSyndrome || "–" }}
        </td>
        <td>
          <button
            class="btn btn--small btn-purple btn-flat"
            (click)="openCommentModal(item.comment)"
          >
            {{ "researches_comment_button" | translate }}
          </button>
        </td>
        <td class="__cell-width-medium">
          <ng-container
            [ngTemplateOutlet]="links"
            [ngTemplateOutletContext]="{ item: item }"
          ></ng-container>
        </td>
      </tr>
    </table>
  </div>
</section>

<section *ngIf="isGeneAssociatedWithLongevityEffects">
  <h4>{{ "gene_page_researches_longevity_effects" | translate }}</h4>
  <div class="table-section __mt-20 __w-content">
    <table class="table table--gene-to-longevity-effect">
      <thead>
        <th>{{ "researches_data_type" | translate }}</th>
        <th class="__cell-width-small">
          {{ "researches_phenotype" | translate }}
        </th>
        <th class="__cell-width-small">
          {{ "gene_page_allelic_polymorphism" | translate }}
        </th>
        <th class="__cell-width-small">
          {{ "researches_allelic_variant" | translate }}
        </th>
        <th>{{ "gene_page_researches_transcriptome_proteome" | translate }}</th>
        <th>{{ "researches_model_organism" | translate }}</th>
        <th>{{ "researches_sex" | translate }}</th>
        <th>
          {{ "researches_comment" | translate }}
        </th>
        <th>{{ "researches_reference" | translate }}</th>
      </thead>

      <tr *ngFor="let item of researches.geneAssociatedWithLongevityEffects">
        <td>
          {{ item.dataType || "–" }}
        </td>
        <td>
          {{ item.longevityEffect || "–" }}
        </td>
        <td>
          {{ item.allelicPolymorphism || "–" }}
        </td>
        <td>
          {{ item.allelicVariant || "–" }}
        </td>
        <td>
          {{ item.changeType || "–" }}
        </td>
        <td class="__nowrap">
          {{ item.modelOrganism || "–" }}
        </td>
        <td>
          {{ item.sex || "–" }}
        </td>
        <td>
          <button *ngIf="item?.comment.length !== 0"
            class="btn btn--small btn-purple btn-flat"
            (click)="openCommentModal(item.comment)"
          >
            {{ "researches_comment_button" | translate }}
          </button>
        </td>
        <td class="__cell-width-medium">
          <ng-container
            [ngTemplateOutlet]="links"
            [ngTemplateOutletContext]="{ item: item }"
          ></ng-container>
        </td>
      </tr>
    </table>
  </div>
</section>

<section *ngIf="isAdditionalEvidences">
  <h4>{{ "gene_page_researches_additional_evidence" | translate }}</h4>
  <div class="table-section __mt-20 __w-content">
    <table class="table table--gene-to-additional-evidence">
      <thead>
        <th>
          {{ "researches_comment" | translate }}
        </th>
        <th>{{ "researches_reference" | translate }}</th>
      </thead>

      <tr *ngFor="let item of researches.additionalEvidences">
        <td>
          {{ item.comment }}
        </td>
        <td class="__cell-width-medium">
          <ng-container
            [ngTemplateOutlet]="links"
            [ngTemplateOutletContext]="{ item: item }"
          ></ng-container>
        </td>
      </tr>
    </table>
  </div>
</section>

<ng-template #links let-item="item">
  <a
    *ngIf="item?.doi !== ''"
    href="https://doi.org/{{ item?.doi }}"
    class="link"
    target="_blank"
    >{{ item?.doi }}</a
  ><br />

  <a
    *ngIf="item?.pmid !== ''"
    href="https://pubmed.ncbi.nlm.nih.gov/17170002/{{ item?.pmid }}"
    class="link"
    target="_blank"
    >{{ item?.pmid }}</a
  ><br />
</ng-template>

<ng-template #commentModalBody let-data>
  <div class="comment-modal__header">
    <span class="title">
      {{ "researches_comment" | translate }}
    </span>
    <button mat-icon-button
            class="close-button"
            (click)="closeCommentModal()"
            aria-label="Закрыть">
      <span class="fa fal fa-times"></span>
    </button>
  </div>
  <div class="comment-modal__body">
    {{ data }}
  </div>
</ng-template>
